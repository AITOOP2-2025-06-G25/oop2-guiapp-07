# 📄 第7回グループワーク 役割分担計画（画像処理GUIアプリ化）

## 🎯 役割分担の基本方針

ベースとなる画像処理ロジック（`lecture05_01.py`の内容）は完成しているため、開発の焦点は**「既存の画像処理ロジックとPySide6のGUIをどのように連携させるか」**に置きます。

3名のメンバーに対し、「GUIデザイン」「イベント処理・インターフェース」「画像処理コア」の3つの主要な役割に分けて作業を割り振ります。

---

## 👨‍💻 役割分担案（3名体制）

### 1. 🖼️ GUIデザイン・ビュー層担当 (例: メンバーA)

主にユーザーに見える部分（**View**）の作成を担当し、画像処理ロジックとは**インターフェース関数**を介してのみ連携します。

| 担当範囲 | 具体的な作業内容 | 連携が必要な箇所 |
| :--- | :--- | :--- |
| **GUIの全体構造** | PySide6のメインウィンドウ、レイアウト、各種ウィジェット（ボタン、画像表示エリアなど）の実装。 | すべて。特に次のメンバーが実装するイベント処理と、画像処理コアの実行関数。 |
| **ボタン配置とラベル** | 「写真取得ボタン」「画像合成実行ボタン」「結果保存ボタン」などの配置と、処理状態を示すラベルの実装。 | 画像処理コアの**実行関数**を呼び出すイベント処理。 |
| **画像表示処理** | カメラ画像や合成後の画像をGUIウィンドウ内に表示するためのウィジェット（`QLabel`など）へのデータ渡しと、表示を更新する処理の実装。 | **モデル・インターフェース関数**からの画像データ（`cv2.Mat`または`QImage`変換後）の受け取り。 |

### 2. 🔌 イベント処理・インターフェース層担当 (例: メンバーB)

GUI（View）と画像処理ロジック（Model/Core）の**接着剤（Controller/Interface）**となる部分を担当します。

| 担当範囲 | 具体的な作業内容 | 連携が必要な箇所 |
| :--- | :--- | :--- |
| **ボタンのイベント処理** | **「写真取得ボタン」**が押されたら、`MyVideoCapture`を起動し、画像を取得・保存する処理の実装。 | カメラ処理クラス（`MyVideoCapture`）と画像処理コア。 |
| **合成処理の実行** | **「画像合成実行ボタン」**が押されたら、画像処理コアの関数（`composite_images`）を呼び出し、結果をGUIに返す処理の実装。 | 画像処理コアの**実行関数**の引数と戻り値。 |
| **画像データ永続化** | 取得したカメラ画像やGoogle画像などの**画像データを、GUIの生存期間中保持**するための仕組み（PySide6のクラス変数など）の実装。 | 画像処理コアからGUIへのデータの受け渡し。 |

### 3. ⚙️ 画像処理コア・機能拡張担当 (例: メンバーC)

既存の画像処理ロジック（`lecture05_01()`）をGUIから呼び出せるように整理し、将来的な機能追加に備えた改修を担当します。

| 担当範囲 | 具体的な作業内容 | 連携が必要な箇所 |
| :--- | :--- | :--- |
| **画像処理の関数化** | `lecture05_01()`内の処理を、**GUIからの入力（例: `capture_img`, `google_img`）**を受け取り、**結果画像（`result_img`）**を返す純粋な関数として再定義・整理。 | インターフェース層が呼び出す**実行関数の引数と戻り値**。 |
| **エラー処理の整理** | 画像ファイルの読み込みエラーなど、エラーをGUIにフィードバックするための処理の追加。 | イベント処理層がエラーを受け取った際の**GUIへの表示方法**。 |
| **処理のパラメータ化** | （発展として）合成時の白色判定のしきい値などを、GUIから設定できるようにするための準備や設計。 |

---

## 📢 リーダーが最初に決定すべきインターフェース

メンバーが個別に開発を始める前に、リーダーが中心となって以下の**インターフェース（接続規約）**をグループ全員で合意し、ベースプログラムに反映させておく必要があります。

### 1. 画像処理コア関数の仕様

既存のロジックから、**入出力**を明確にします。

| 項目 | 仕様案 |
| :--- | :--- |
| **関数名** | `composite_images` など |
| **引数** | `capture_img: cv2.Mat`, `google_img: cv2.Mat` |
| **戻り値** | `result_img: cv2.Mat` (合成後の画像) |

### 2. 画像データ保持の仕組み

GUIクラス内で、どの変数がどの画像を保持するかを決定します。

| 変数名（GUIクラス内） | 保持するデータ |
| :--- | :--- |
| `self.capture_img` | カメラで取得した画像 (`cv2.Mat`) |
| `self.google_img` | ベースとなる画像 (`cv2.Mat`) ※最初に一度だけ読み込む |
| `self.result_img` | 合成処理の結果画像 (`cv2.Mat`) |
